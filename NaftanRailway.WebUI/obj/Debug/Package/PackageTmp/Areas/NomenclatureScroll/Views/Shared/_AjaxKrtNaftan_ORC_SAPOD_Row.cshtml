@using System.Text.RegularExpressions
@using NaftanRailway.Domain.Concrete.DbContext.ORC
@model IEnumerable<krt_Naftan_orc_sapod>

@foreach (krt_Naftan_orc_sapod item in Model) {
    <tr>
        <td class="vert-align">@item.nkrt</td>
        <td class="vert-align">@item.tdoc</td>
        <td class="vert-align">@item.vidsbr</td>
        <td class="vert-align">@item.dt.ToString("dd.MM.yyyy")</td>
        <td class="vert-align">@item.nomot</td>
        <td class="text-right vert-align">@item.sm_no_nds.ToString("#,#")</td>
        <td class="text-right vert-align">@item.sm_nds.ToString("#,#")</td>
        <td class="text-right vert-align">@item.sm.ToString("#,#")</td>
        <td class="text-right vert-align">@item.stnds.ToString(@"#,#0'%'")</td>
        <td class="vert-align" style="white-space: nowrap">@item.txt</td>
        <td class="vert-align">@item.p_type</td>
        <td class="vert-align text-left" style="min-width: 230px;">@item.namesbr</td>
        <td class="vert-align" style="color: " @((item.ORC_ID_ED != @item.ID_ED) ? "red" : "black")>@item.ORC_ID_ED</td>
        <td class="success vert-align" style="color: " @((item.ORC_ID_ED != @item.ID_ED) ? "red" : "black")>@item.ID_ED</td>
        <td class="success vert-align" style="@(item.textm != null && item.textm.Length>40?@"min-width:320px;":"white-space:nowrap")">@item.textm</td>
        <td class="success vert-align">@item.cod_sbor</td>
        <td class="success vert-align">
        @{if(@item.cod_sbor !=null){
            @((Regex.IsMatch(@item.cod_sbor.ToString(), @"30[01]", RegexOptions.IgnoreCase)) 
                ? @item.date_raskr.Value.ToString() 
                : @item.date_raskr.Value.ToShortDateString());                      
        }}
        </td>
        <td class="success vert-align">@item.num_doc</td>
        <td class="text-center success vert-align">@((item.kol == null)?"":@item.kol.Value.ToString("#,#"))</td>
        <td class="text-right success vert-align">@((item.summa == null)?"":@item.summa.Value.ToString("#,#"))</td>
        <td class="text-right success vert-align">@((item.nds == null)?"":@item.nds.Value.ToString("#,#"))</td>
    </tr>
}