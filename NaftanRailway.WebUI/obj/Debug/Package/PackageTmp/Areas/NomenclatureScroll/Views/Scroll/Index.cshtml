@using NaftanRailway.WebUI.HtmlHelpers
@model NaftanRailway.WebUI.Areas.NomenclatureScroll.Models.IndexModelView
@{
    Layout = "../Shared/_Layout.cshtml";
    ViewBag.Title = "Перечни";
    Html.EnableClientValidation(false);
    Html.EnableUnobtrusiveJavaScript(true);
}
<table id="wrkTable" class="small table table-hover table-responsive table-striped table-condensed table-bordered table-fixed">
    <thead class="thead-inverse">
        <tr>
            <th colspan="2" class="text-center">№ перечня</th>
            <th class="text-center">Результат<br />сверки</th>
            <th class="text-center">Признак<br />коррект.<br />перечня</th>
            <th class="text-center">Вид<br />услуг</th>
            <th class="text-center">Период<br />отчётности</th>
            <th class="text-center">№ счёт-<br />фактуры</th>
            <th class="text-center">Дата счёт-<br />фактуры</th>
            <th class="text-center">Стоимость услуг<br />с НДС, руб.</th>
            <th class="text-center">НДС, руб.</th>
            <th class="text-center">Начальная<br />дата<br />данных</th>
            <th class="text-center">Конечная<br />дата<br />данных</th>
            <th class="text-center">Набор сборов перечней</th>
            <th class="text-center">Кол-во<br />записей в<br />перечне</th>
            <th class="text-center">Дата эл. письма ОРЦ</th>
        </tr>
    </thead>
    <tbody class="text-center" id="scrollList">
        @{ Html.RenderPartial("_AjaxKrtNaftanRow", @Model.ListKrtNaftan);}
    </tbody>
</table>
<div id="loadingInfiniteScroll" class="text-center" style="display: none">
    <img alt="Загрузка..." src='@Url.Content("~/Content/Images/Gear.gif")'>
</div>
<!--Date Modal-->
<div class="modal fade bs-modal-lg" tabindex="-1" role="dialog" aria-labelledby="gridSystemModalLabel" id="dateModal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="gridSystemModalLabel">Изменение отчётной даты</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        @using(@Ajax.BeginForm("ChangeData", "Scroll",
                            new AjaxOptions() {
                                OnFailure = "UpdateFailure",
                                OnSuccess = "UpdateDate",
                                HttpMethod = "Post",
                                Url = @Url.Action("ChangeData", "Scroll")
                            },
                         new { @class = "form-inline navbar-form", role = "form", id="ChangeDateForm" })) {
                            <div class="form-group col-lg-6">
                                @Html.Hidden("ListKrtNaftan[0].KEYKRT", Model.ListKrtNaftan.First().KEYKRT, new { id = "HiddenInputModal" })
                                <div id="sandbox-container">
                                    <div class="input-group date">
                                        @Html.TextBoxFor(m => m.ReportPeriod, new { @class = "form-control", @readonly = "readonly" })
                                        <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                                    </div>
                                </div>
                            </div>
                            <div class="pull-right">
                                @Html.ActionLink("Отчёт", "Reports", new { numberScroll = "", reportYear = "" }, new { @class="btn btn-default", id ="reportShow" })
                                <button id="BtnChangeDate" type="submit" class="btn btn-primary">Изменить</button>
                            </div>
                        }
                    </div>
                </div>
                <div class="modal-footer">
                    <!--Unobstrusive requered-->
                    @Html.ValidationMessageFor(m => m.ReportPeriod, "Неверная дата")
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
<!--Wait Modal-->
 <div class="modal fade" id="waitModal" tabindex="-1" role="dialog" aria-labelledby="waitModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="waitModalLabel">Идет формирование отчётности. Пожалуйста подождите....</h4>
      </div>
      <div class="modal-body">
       <div class="progress">
          <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100" style="width: 10%">
            <span class="sr-only">10% Complete</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--pagging-->
<div class="bottom-right pull-right">
    @Html.PageLinks(Model.PagingInfo, 21, x => Url.RouteUrl("NomenclatureScroll_default", new RouteValueDictionary() {{"page", x}}))
</div>
<!--Ajax paging-->
@*<div class="bottom-right pull-right">
    <ul class="pagination">
    @{
        for (int i = 0; i < Model.PagingInfo.TotalPages; i++){
            <li class="@(i == Model.PagingInfo.CurrentPage ? "Active":"")">
                @Ajax.RouteLink(i.ToString(),
                    new RouteValueDictionary() { { "page", i }},
                        new AjaxOptions(){
                            HttpMethod = "Get",
                            UpdateTargetId = "scrollList",
                            InsertionMode = InsertionMode.Replace,
                            LoadingElementDuration = 1200,
                            LoadingElementId = "loadingInfiniteScroll"
                        })
            </li>
        }
    }
    </ul>
</div>*@