@using NaftanRailway.Domain.BusinessModels
@model NaftanRailway.WebUI.ViewModels.DispatchListViewModel
@{
    Layout = "../Shared/_Layout.cshtml";
    ViewBag.Title = @"Номер отправки";
    int i = (Model.PagingInfo.CurrentPage - 1) * Model.PagingInfo.ItemsPerPage;
}
<div class="row">
    <div id="categories" class="col-lg-2 hidden-xs">
        @{Html.RenderAction("MenuTypeOperations", "Navigation");}
    </div>

    <div class="col-xs-12 col-lg-10">
        <!--body summary.cshtml -->
        <div class="panel-group col-lg-12">
            @foreach (Shipping p in Model.Dispatchs){
                @Html.Partial("ShippingSummary", p,
                    new ViewDataDictionary{
                        {"index", ++i}
                    })
            }
        </div>  

        <!--pagging -->
        <div class="col-lg-12 text-right bottom">
            @if (Model.PagingInfo.TotalItems > 0){
                <div class="btn-group hidden-xs">
                    @Html.PageLinks(Model.PagingInfo, 21, x => Url.RouteUrl(Model.Menu.ShippingChoise == "" ? "Period" : "Path_Full",
                        new{
                            page = x,
                            operationCategory = Model.OperationCategory,
                            reportPeriod = Model.Menu.ReportPeriod != null ?
                                Model.Menu.ReportPeriod.Value.ToString("MMyyyy") :
                                DateTime.Today.ToString("MMyyyy"),
                            templateNumber = Model.Menu.ShippingChoise ?? ""
                        }))
                </div>
                <div class="btn-group pull-right visible-xs">
                    @Html.PageLinks(Model.PagingInfo, 10, x => Url.RouteUrl(Model.Menu.ShippingChoise == "" ? "Period" : "Path_Full",
                        new{
                            page = x,
                            operationCategory = Model.OperationCategory,
                            reportPeriod = Model.Menu.ReportPeriod != null ?
                                Model.Menu.ReportPeriod.Value.ToString("MMyyyy") :
                                DateTime.Today.ToString("MMyyyy"),
                            templateNumber = Model.Menu.ShippingChoise ?? ""
                        }))
                </div>
            }
        </div>
    </div>
</div>